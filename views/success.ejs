<%- include('partials/header') %>

<div class="container">
    <h1>Successful <%= signup %></h1>
    <h3>Hello <%= name %></h3>
    <a href="/createpost">Create Post</a>
    <p class="spacer"></p>
    <% if (posts.length) { %>
        <% posts.forEach(function(post) { %>
            <div class="card" style="width: 70rem;">
                <div class="card-body">
                    <h5 class="card-title"><%= post.title %></h5>
                    <h6 class="card-subtitle mb-2 text-muted"><%= post.subtitle %></h6>
                    <p class="card-text"> <%- post.content.substring(0,200) %>... </p>
                    <a href="/post/<%- post.title.replace(' ', '-') %>" class="card-link">View Post</a>
                    <a href="/editpost/<%- post.id %>" class="card-link">Edit Post</a>
                    <a href="/deletepost/<%- post.id %>" class="card-link" style="color: red;">Delete Post</a>
                </div>
            </div>
        <% }); %>
    <% } else { %>
        <div class="card" style="width: 70rem;">
            <div class="card-body">
                <h5 class="card-title">You have no posts!</h5>
                <h6 class="card-subtitle mb-2 text-muted">Make your first post now.</h6>
                <p class="card-text">Click on the link below to create your first post.</p>
                <a href="/createpost" class="card-link">Create Post!</a>
            </div>
        </div>
    <% } %>
</div>

<%- include('partials/footer') %>